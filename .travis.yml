language: java
jdk: openjdk8
env:
  global:
  - secure: JZj8oAM9iXiK/DL8lEr5mE9i/vaCeSfDxty0xbf5sCyXEB1XD34k+Y0B6WWb3BcF+nSSyUFDywE+lPIwmDVXR9NaQmzF3hijbP1iSJdfzYPvHT38ECpyCuiILPyqNxaZpOmR+qwwlKMRbn7auElsAMdGa1ELGoxuf73eKqcksJ7Og2Gekto/oeQx+zuEINW3V5z/omDRNHvs3cdID6ogHUnyL8gCijCVZ9tWQh5YCqhmPrhsboiQzNnk86ZbqBrQFBmEubU5YlBhLwx4Faj2FgKt22Scw1GHSlz9ReD2nfslSLyIHCkbraMDQ+/Bjo1SaSmVRb6zpRgnYGD2g/RZOxKIzsPMOj+GqorIu4Wmyi6czwlEC7oTLWK7MKXpVg+h6bIdunzB20tOYTvogwOhtPPFio4IQMWfOQHIuAbiyOCISfTtRRY2VcVVrOyakQNefsXb2FSrF1fJ8jQToNt6OT4zr8j29T6sw5a8rLCqK8ooSRfYVAzZTJkKe8HP/0Uu6kU4Z8VOVjCKSDCcwjrAaPgZe5n+1OsHtvIVWAEFe2tCDkgnpLbl0TlXV0b9klAC/xdszFxO2ZsnQJ8XVD5eiNXpEMllBfrJ4R532RyKp/RNLd/syL/4n7ZM1eHSDC1lCkg7mK+F4+aMd3BsXNMjpOQNkBbPYeupc2TLqpGpkT8=
  - secure: Z7/MsnPyFaTjxJ4/N4FubDoORNwNja0cbKYdPrxMbj8/ptp9bYSLCiZKj29cgd0sNXQDmcvfaTN8SyJud65SyF9VD+T2V+2a3bf1cUtI29H/OMTzBKbYIPmh0oSWlIy1Piiy75BUVfQvGG9iDJHrt7kBwTx4QBeOas338Ve+E9BJqZoTG8PptyRaHqb515c+HTTGsl2Xc5U87wQeJTzw/FyblFx87uCDCYviuI8qndFX+wLIMAFlnx5+Mm7ofWg2PG5TAXuEFM46mWuoeHyG0tlP3f0O4mNW/wY3uvgF6wVuYUOi6AdRQgl4v4/zSsP6NOLdT+hw2kWCfbSqI+L/QqU6jIlIkFRBueIIsQ2PapusrKHAA/eZcea5FIvUbv+wVpFzsl/RBw5NIVDzSZ7cKbZtMdzDnxFWSSNEcPNssBw0n+quxcdrmonFOER3sngm19TNm7Mn/teq4bWpwBklGK1VgLNQk/CWb50TSpdtNtyV2nT6PrRlF/G3x9pCAg5C17cxWTA68SVTMKKwLI8CkQbytj1kRMlQCp/p60AS8s/KYrfi993FoPTPqbGwKfhb+7mNR228jsj6eY8UjgDmolfhpmpQReK0kSc3AcmNwHGqgUhfrNuYNLXPjnjJJbQ6F/U1zi3GTiRByQlvd6FYlEw/3lXSLlf+W7gH/6AcNxs=
  - secure: oAgEZ4/S1vhPZYNGf4BeScyWn+SuM+iYr+mPc3tCDqodpvFZEQTjCx6/1MlBmisBYk8AlnJ/373CXJW8xvBsmBVhR1+I1bhHQRKH09yRWWNLlJDa0Jy2aJK1Umpgp3EabnNwj40a/7xQSLlDvflfo68CoJA49zBuvThFf997MIsee8hmKfGH+tqD8nGE5luFC9bX+oFmbCv4UeB9b18yrqVxlt8XDEC4DTj7dPb/LBYeW8PlO8jXVdYjqmJK70ortmax9LM46r8fTLYcxyTdgvlRHHKv6/4dsno6NqAI9MeHlpy0hMPVYcsmxpMFNT++O9sk3O37HMvdtuXdCFL8873v7pH8i82JbKzRYZEHlxhaSbFcQRG52FNS8gMUn2VzeEaUf4EEYETIEVH+B7GkVcWSU1wBHbdRTzddu49lOxLsQ3/OCGRE09F5c0fCFc4tYaRYSjI5ukZEQMeV3ovrfdar0KRQ8a81/Ym59sNlloMW6OvHXgE0zhG6vrAjFqAeJ5o6QGfyvA5s8vyOt20v6EWu/OcN2VcdO8HR91NMIWxim1wtnMcOKrIX74ObyydIkIsYJVuAdBZq30Kga2I3YIsqTO8R05jLVTxd65yPUiA4Xn7O3THcTvWfaAy4ZndmwJ0rSWQOB7JY7ddlZzdPvzLhd2BR35T3t20DUdWbDSA=
  - secure: XHEGb8S9kXgR96mnadoNwa0Jhg2x64NfvLj7bpLFI6OpiIGSslN/0ZNi7o33JcAqLmdy/xPP/H47cTTtyBqB1SU/NwRQUd4AMdFsbRWN8tPziMS26WOMFfQgR5eAVTC62MzwIQbEYJ5BFBxSkBmBNCqyixV/rzglQb08cgJZb1gNyVH/ymnlxlRsSvWyCLuSLxnP8eTjkt4OLiwekxV4sJPdy7Z6TXqBluc29o84CJe7wJc4EpgjQiRw9rrQeShb26g9KOn983AXJUGSmMAR9XHkOiVdTi1ftBMIclPxGkJCwEiCH/uTtz90xXxqmAs/u1BnKNbDC0JxHVH/QwNSL49KCwIzmsNbLYGZl9sVbxUcil+qVraag5q0CUUHqVsuVzUpqwQO71hBSuUnp+nuTHQP22lB2J1/yCcpPNvp2Z0WGLJVlVNq6LGmbn92woGD3bWkjRGsqks0TnorNYE8G11k6Ih3+HBI/nLQB5FTDQOxYTzMXoDv3i45lVgfs64dsS/zO/4yQB89+LeAxhDyGOg+K5M9wfUbd0FyziSVxD0u7iqnHfowFyi7qZnS+INQeUr4lXcmaFwYRPslNYskJhv7JPszgu2qPiv57hp/sw4ZuwtDqVS0FYB4dLscrVhjeN+WstYc0u2FUBScQYoCuM4t4oQ/VsFfNF1ux4VoBYw=
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -rf $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
  - "$HOME/.gradle/mongo"
deploy:
  provider: script
  script: "./gradlew publish -Dsigning.keyId=$SIGNING_KEY_ID -Dsigning.secretKeyRingFile=$SIGNING_SECRET_KEY_FILE"
  skip_cleanup: true
  on:
    tags: true
before_install:
- openssl aes-256-cbc -K $encrypted_2e6b62dd1b86_key -iv $encrypted_2e6b62dd1b86_iv -in key.gpg.enc -out key.gpg -d
